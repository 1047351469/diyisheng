<template>
  <div v-if="visible" :class="alertClass" :style="{ transitionDuration: duration + 'ms' }">
    {{ message }}
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue';

// 定义 props
defineProps({
  type: {
    type: String,
    default: 'info', // 提示类型: success, error, warning, info
  },
  message: {
    type: String,
    required: true, // 提示信息
  },
  duration: {
    type: Number,
    default: 3000, // 自动消失时间（毫秒）
  },
  autoDismiss: {
    type: Boolean,
    default: true, // 是否自动消失
  },
});

// 控制显示状态
const visible = ref(true);

// 根据 `type` 动态生成样式类
const alertClass = computed(() => {
  return {
    alert: true,
    'alert-success': type === 'success',
    'alert-error': type === 'error',
    'alert-warning': type === 'warning',
    'alert-info': type === 'info',
  };
});

// 自动消失逻辑
onMounted(() => {
  if (autoDismiss) {
    setTimeout(() => {
      visible.value = false;
    }, duration);
  }
});
</script>

<style scoped>
.alert {
  padding: 10px 20px;
  border-radius: 5px;
  font-size: 14px;
  color: #fff;
  margin: 10px 0;
  transition: opacity 0.3s ease;
  opacity: 1;
}

.alert-success {
  background-color: #4caf50;
}

.alert-error {
  background-color: #f44336;
}

.alert-warning {
  background-color: #ff9800;
}

.alert-info {
  background-color: #2196f3;
}
</style>

<template>
  <div>
    <h1>Alert 提示示例</h1>
    <button @click="showSuccess">显示成功提示</button>
    <button @click="showError">显示错误提示</button>
    <button @click="showWarning">显示警告提示</button>
    <button @click="showInfo">显示信息提示</button>
    <Alert
      v-if="showAlert"
      :type="alertType"
      :message="alertMessage"
      :duration="alertDuration"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue';
import Alert from './Alert.vue';

const showAlert = ref(false);
const alertType = ref('info');
const alertMessage = ref('');
const alertDuration = ref(3000);

const triggerAlert = (type, message, duration = 3000) => {
  alertType.value = type;
  alertMessage.value = message;
  alertDuration.value = duration;
  showAlert.value = true;
  setTimeout(() => {
    showAlert.value = false; // 隐藏提示
  }, duration);
};

const showSuccess = () => {
  triggerAlert('success', '操作成功！', 3000);
};

const showError = () => {
  triggerAlert('error', '发生错误，请重试！', 3000);
};

const showWarning = () => {
  triggerAlert('warning', '警告：请注意操作！', 3000);
};

const showInfo = () => {
  triggerAlert('info', '这是一个提示信息。', 3000);
};
</script>